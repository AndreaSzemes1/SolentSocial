(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5221:(e,t,n)=>{Promise.resolve().then(n.bind(n,8091)),Promise.resolve().then(n.bind(n,6417))},8091:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});var s=n(5155),a=n(7406),i=n(7058),l=n(2115),d=n(3170),u=n(9899),o=n(9695);let r=()=>{let[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)(!0),[c,m]=(0,l.useState)(!1),[v,x]=(0,l.useState)({isOpen:!1,eventId:null}),h=(0,i.aU)(a.y);(0,l.useEffect)(()=>{(async()=>{t((await (0,i.GG)((0,i.rJ)(h,"events"))).docs.map(e=>({id:e.id,...e.data()}))),r(!1)})()},[]);let p=async()=>{await (0,i.kd)((0,i.H9)(h,"events",v.eventId)),t(e.filter(e=>e.id!==v.eventId)),x({isOpen:!1,eventId:null})},g=async n=>{t([...e,{id:(await (0,i.gS)((0,i.rJ)(h,"events"),{...n,date:new Date(null==n?void 0:n.date).getTime(),location:new i.Ci(n.location.latitude,n.location.longitude),createdAt:(0,i.O5)()})).id,...n}]),m(!1)},y=async(e,n)=>{let s=(0,i.H9)(h,"events",n);await (0,i.mZ)(s,{...e,date:new Date(e.date).getTime(),location:new i.Ci(e.location.latitude,e.location.longitude)}),t(t=>t.map(t=>t.id===n?{...t,...e}:t))};return(0,s.jsxs)("div",{className:"container mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Dashboard"}),(0,s.jsx)("button",{onClick:()=>m(!0),className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-700 transition",children:"+ Add Event"})]}),n?(0,s.jsx)("p",{className:"text-center text-gray-600",children:"Loading events..."}):(0,s.jsx)(o.A,{events:e,onDelete:e=>x({isOpen:!0,eventId:e}),onEditSubmit:(e,t)=>y(e,t),buttonTypes:{edit:!0,delete:!0}}),c&&(0,s.jsx)(u.A,{event:null,onSubmit:g,onClose:()=>m(!1)}),(0,s.jsx)(d.A,{isOpen:v.isOpen,message:"Are you sure you want to delete this event?",onConfirm:p,onCancel:()=>x({isOpen:!1,eventId:null})})]})}},6417:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var s=n(5155),a=n(7406),i=n(399),l=n(7058),d=n(6046),u=n(2115);let o=e=>{let{children:t}=e,[n,o]=(0,u.useState)(null),[r,c]=(0,u.useState)(!1),[m,v]=(0,u.useState)(!0),x=(0,i.xI)(a.y),h=(0,l.aU)(a.y),p=(0,d.useRouter)();return((0,u.useEffect)(()=>{let e=(0,i.hg)(x,async e=>{if(o(e),!e){p.push("/login");return}let t=(0,l.H9)(h,"users",e.uid),n=await (0,l.x7)(t);n.exists()&&n.data().isAdmin?c(!0):p.push("/"),v(!1)});return()=>e()},[x,p,h]),m)?(0,s.jsx)("p",{className:"text-center text-gray-600",children:"Checking admin access..."}):r?t:null}}},e=>{var t=t=>e(e.s=t);e.O(0,[484,523,992,361,807,28,441,517,358],()=>t(5221)),_N_E=e.O()}]);